# Epic 3: 智能复习系统

**用户成果：** 用户可以按照科学的间隔重复算法进行复习，通过人性化评分调整记忆进度

**覆盖需求：**

- FR10-FR18: 复习系统全部功能
- NFR-R4: 算法100%准确性
- NFR-U3: 反馈及时性

---

## Story 3.1: 今日复习任务列表

As a **学习者**,
I want **查看今天需要复习的知识点**,
So that **我可以合理安排学习时间，按计划完成复习**.

**Acceptance Criteria:**

**Given** 应用已启动
**When** 用户打开应用或切换到"今日复习"视图
**Then** 显示今日待复习知识点列表
**And** 列表按优先级排序（超期 > 今日到期 > 提前复习）
**And** 每个卡片显示：

- 知识点标题（问题形式）
- 标签
- 计划复习时间
- 已复习次数

**And** 显示汇总信息：

- 今日待复习总数
- 已完成数量
- 剩余数量
- 完成进度条

**When** 列表中有超期未复习的知识点
**Then** 这些知识点标记为红色
**And** 显示超期天数（如"超期2天"）

**When** 今日无待复习知识点
**Then** 显示"今日无复习任务"
**And** 显示鼓励消息和下次复习时间预告

**When** 用户点击知识点卡片
**Then** 进入复习流程（Story 3.2）

---

## Story 3.2: 复习流程和人性化评分

As a **学习者**,
I want **通过简单的表情符号评估记忆程度**,
So that **复习过程轻松愉快，不需要纠结数字评分**.

**Acceptance Criteria:**

**Given** 用户点击待复习知识点
**When** 进入复习界面
**Then** 全屏显示知识点标题（问题）
**And** 内容区域默认隐藏
**And** 显示"显示答案"按钮

**When** 用户点击"显示答案"
**Then** 展开显示知识点内容
**And** 显示评分选项（5个表情符号）：

- 😟 忘记了
- 🤔 记得一点
- 😐 记得一般
- 😊 记得还可以
- 🎯 非常熟悉

**And** 每个表情下方显示简短说明
**And** 表情按钮大且易点击（移动端友好）

**When** 用户选择评分
**Then** 立即保存复习记录到数据库
**And** 调用复习算法计算下次复习时间
**And** 显示简短反馈动画（如"✓ 已记录"）
**And** 自动进入下一个待复习知识点

**When** 所有知识点复习完成
**Then** 显示完成页面：

- "今日复习完成！"消息
- 今日复习统计（总数、平均评分）
- 下次复习时间预告
- "返回主页"按钮

**And** 整个复习流程支持键盘快捷键：

- 空格键：显示答案
- 数字键1-5：快速评分

---

## Story 3.3: 复习算法动态调整

As a **学习者**,
I want **系统根据我的评分自动调整复习间隔**,
So that **遗忘的知识点更频繁复习，熟悉的知识点间隔延长**.

**Acceptance Criteria:**

**Given** 用户完成一次复习并评分
**When** 评分为1（😟 忘记了）或2（🤔 记得一点）
**Then** 下次复习间隔缩短50%或30%
**And** 数据库记录评分和下次复习时间

**When** 评分为3（😐 记得一般）
**Then** 下次复习间隔保持标准（基础间隔 × 频率系数）

**When** 评分为4（😊 记得还可以）或5（🎯 非常熟悉）
**Then** 下次复习间隔延长20%或50%

**When** 知识点连续3次评分 ≥ 4
**Then** 系统检查是否达到记忆标准：

- 至少复习5次
- 最近3次评分 ≥ 4
- 距离创建时间 ≥ 30天

**And** 达到标准后标记为"已掌握"
**And** 进入长期抽查模式（每60天复习一次）

**When** 已掌握的知识点再次评分 < 3
**Then** 重新标记为"学习中"
**And** 重新开始标准复习流程

---

## Story 3.4: 全局复习频率系数

As a **学习者**,
I want **全局调整所有知识点的复习频率**,
So that **我可以根据时间充裕度控制复习负担**.

**Acceptance Criteria:**

**Given** 用户在设置页面
**When** 用户打开"复习设置"
**Then** 显示全局复习频率系数滑块
**And** 滑块范围0.5x - 1.5x
**And** 默认值1.0x
**And** 实时显示当前系数值

**When** 用户调整滑块到0.5x
**Then** 显示说明："复习频率加倍，适合备考冲刺"
**And** 显示预计影响："每日复习量约增加2倍"

**When** 用户调整滑块到1.5x
**Then** 显示说明："复习频率减半，适合时间紧张"
**And** 显示预计影响："每日复习量约减少50%"

**When** 用户保存设置
**Then** 重新计算所有知识点的下次复习时间
**And** 显示"已更新XX个知识点的复习计划"
**And** 新的复习计划立即生效

**And** 单个知识点的独立系数优先级高于全局系数
**And** 最终间隔 = 基础间隔 × 评分系数 × 全局系数 × 单点系数

---

## Story 3.5: 复习提醒和通知

As a **学习者**,
I want **在有待复习任务时收到提醒**,
So that **我不会忘记复习，养成良好的学习习惯**.

**Acceptance Criteria:**

**Given** 应用正在运行（即使在后台）
**When** 当天有待复习知识点
**Then** 在设定的提醒时间（默认20:00）发送桌面通知
**And** 通知内容："今日有X个知识点待复习"
**And** 点击通知打开应用并跳转到复习页面

**When** 用户在设置中配置提醒时间
**Then** 可以选择时间（如08:00、12:00、20:00）
**And** 可以启用/禁用每日提醒
**And** 可以设置多个提醒时间

**When** 应用未运行
**Then** Windows: 使用计划任务启动应用（可选）
**And** macOS: 使用Launch Agent启动应用（可选）

**When** 用户在系统托盘菜单
**Then** 显示今日待复习数量徽章
**And** 点击"开始复习"快速进入复习页面

---

## Epic 3 完成！

✅ **已创建5个Stories**

- Story 3.1: 今日复习任务列表
- Story 3.2: 复习流程和人性化评分
- Story 3.3: 复习算法动态调整
- Story 3.4: 全局复习频率系数
- Story 3.5: 复习提醒和通知

✅ **覆盖需求验证：**

- ✅ FR10: 艾宾浩斯算法计算下次复习时间 → Story 3.3
- ✅ FR11: 查看当天待复习列表 → Story 3.1
- ✅ FR12: 5级人性化评分 → Story 3.2
- ✅ FR13: 根据评分动态调整间隔 → Story 3.3
- ✅ FR14: 全局复习频率系数 → Story 3.4
- ✅ FR15-FR16: 记忆标准和长期抽查 → Story 3.3
- ✅ FR17: 复习完成情况反馈 → Story 3.1, 3.2
- ✅ FR18: 手动标记立即复习 → Story 3.1
- ✅ NFR-R4: 算法准确性 → Story 1.4单元测试 + Story 3.3验证
- ✅ NFR-U3: 操作反馈 ≤ 100ms → Story 3.2动画反馈
