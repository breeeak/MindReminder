# Epic 2: 知识点管理核心功能

**用户成果：** 用户可以创建、编辑、查看和管理知识点，支持标签分类和搜索

**覆盖需求：**
- FR1-FR9: 知识点管理全部功能
- FR40-FR43: 搜索与筛选功能
- NFR-U1, NFR-U2: 易学性和操作效率

---

## Story 2.1: 知识点CRUD基础功能

As a **学习者**,
I want **快速记录新的知识点**,
So that **我可以随时保存学习内容，避免遗忘**.

**Acceptance Criteria:**

**Given** 用户已登录应用
**When** 用户点击"快速记录"按钮
**Then** 弹出知识点编辑表单
**And** 表单包含以下字段：
- 标题（必填，问题形式提示）
- 内容（可选，支持Markdown）
- 标签（可选，支持多标签）
- 分类（可选，下拉选择）

**When** 用户填写标题并点击"保存"
**Then** 知识点保存到数据库
**And** 显示"保存成功"提示
**And** 表单关闭，返回主界面
**And** 新知识点出现在列表中

**When** 用户在列表中点击知识点
**Then** 显示知识点详情页面
**And** 显示标题、内容、标签、创建时间、更新时间
**And** 显示"编辑"和"删除"按钮

**When** 用户点击"编辑"按钮
**Then** 打开编辑表单，预填充当前数据
**And** 用户可以修改任何字段
**And** 点击"保存"后更新数据库
**And** 显示"更新成功"提示

**When** 用户点击"删除"按钮
**Then** 显示确认对话框"确定删除此知识点吗？"
**And** 用户确认后删除知识点
**And** 显示"删除成功"提示
**And** 返回列表，已删除的知识点不再显示

**And** 所有CRUD操作响应时间 < 200ms
**And** 操作失败时显示友好错误提示

---

## Story 2.2: 标签和分类管理

As a **学习者**,
I want **为知识点添加标签和分类**,
So that **我可以按主题组织知识点，快速找到相关内容**.

**Acceptance Criteria:**

**Given** 用户在编辑知识点
**When** 用户输入标签（用逗号或空格分隔）
**Then** 自动将标签转换为标签列表
**And** 标签显示为可删除的"徽章"样式
**And** 点击徽章的"×"可删除标签

**When** 用户开始输入标签
**Then** 显示已有标签的自动完成建议
**And** 用户可以点击建议快速选择标签
**And** 支持创建新标签

**When** 用户选择分类
**Then** 显示预定义分类列表：
- 编程技术
- 数据结构
- 算法
- 系统设计
- 面试题
- 自定义...（可添加新分类）

**And** 用户可以添加自定义分类
**And** 自定义分类保存到设置中

**When** 用户在主界面查看知识点列表
**Then** 每个知识点卡片显示标签和分类
**And** 点击标签可筛选该标签的所有知识点
**And** 点击分类可筛选该分类的所有知识点

---

## Story 2.3: 知识点搜索功能

As a **学习者**,
I want **快速搜索知识点**,
So that **我可以在大量知识点中快速找到需要的内容**.

**Acceptance Criteria:**

**Given** 用户在知识点列表页面
**When** 用户在搜索框输入关键词
**Then** 实时搜索标题和内容包含关键词的知识点
**And** 搜索结果高亮显示匹配的关键词
**And** 搜索响应时间 < 300ms

**When** 搜索框为空
**Then** 显示所有知识点

**When** 搜索无结果
**Then** 显示"未找到匹配的知识点"
**And** 提供"创建新知识点"的快捷按钮

**When** 用户使用高级搜索
**Then** 可以按以下条件筛选：
- 标签（多选）
- 分类（单选）
- 复习状态（学习中/已掌握）
- 创建日期范围

**And** 多个筛选条件为"与"关系
**And** 筛选结果实时更新
**And** 显示当前筛选条件的标签
**And** 点击标签可清除该筛选条件

---

## Story 2.4: 知识点详情和复习历史

As a **学习者**,
I want **查看知识点的详细信息和复习历史**,
So that **我可以了解学习进度和记忆效果**.

**Acceptance Criteria:**

**Given** 用户打开知识点详情页面
**When** 页面加载完成
**Then** 显示知识点基本信息：
- 标题（大字体，粗体）
- 内容（Markdown渲染）
- 标签列表
- 分类
- 创建时间
- 更新时间

**And** 显示复习统计：
- 复习次数
- 最后复习时间
- 下次复习时间（如果有）
- 当前掌握度（评分趋势）

**And** 显示复习历史时间轴：
- 每次复习的日期
- 每次复习的评分（😟🤔😐😊🎯）
- 当时的下次复习时间
- 实际复习时间与计划时间的对比

**When** 用户点击"开始复习"按钮
**Then** 进入复习流程（Epic 3）

**When** 用户点击"调整复习频率"
**Then** 弹出滑块，范围0.5x - 1.5x
**And** 显示当前系数和预计影响
**And** 保存后立即重新计算下次复习时间

---

## Epic 2 完成！

✅ **已创建4个Stories**
- Story 2.1: 知识点CRUD基础功能
- Story 2.2: 标签和分类管理
- Story 2.3: 知识点搜索功能
- Story 2.4: 知识点详情和复习历史

✅ **覆盖需求验证：**
- ✅ FR1: 问题形式记录知识点 → Story 2.1
- ✅ FR2: 添加答案内容 → Story 2.1
- ✅ FR3: 添加标签/分类 → Story 2.2
- ✅ FR4-FR5: 编辑和删除 → Story 2.1
- ✅ FR6: 查看详细信息 → Story 2.4
- ✅ FR7-FR8: 复习历史和评分趋势 → Story 2.4
- ✅ FR9: 设置独立复习系数 → Story 2.4
- ✅ FR40-FR43: 搜索与筛选 → Story 2.3
- ✅ NFR-U1: 5分钟上手 → 简洁的UI和表单
- ✅ NFR-U2: 快速记录 ≤ 3次点击 → 快速记录按钮
